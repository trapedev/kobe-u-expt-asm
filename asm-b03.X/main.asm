


; ----------------------------------------------------
; 学籍番号 氏名
; ----------------------------------------------------
LIST P=PIC16F84A
INCLUDE "P16F84A.INC"

; ----------------------------------------------------
; 定数定義
RESULT_ADDR EQU 0x30   ; 結果を格納するアドレス
MAX_NUM     EQU 0x0A   ; 合計する最大数（10）

; ----------------------------------------------------
    ORG 0x00
    GOTO START

    ORG 0x04
    ; 割り込みハンドラ（必要な場合）

START:
    ; 合計を保存するレジスタを初期化
    CLRF    0x20    ; 0x20を合計の下位バイトとして使用
    CLRF    0x21    ; 0x21を合計の上位バイトとして使用（オーバーフロー対策）

    ; カウンタを初期化（1から開始）
    MOVLW   0x01
    MOVWF   0x22    ; 0x22をカウンタとして使用

SUM_LOOP:
    ; 現在の数を合計に加算
    MOVF    0x22, W
    ADDWF   0x20, F
    BTFSC   STATUS, C    ; キャリーが発生した場合
    INCF    0x21, F      ; 上位バイトをインクリメント

    ; カウンタをインクリメント
    INCF    0x22, F

    ; カウンタが最大数（10）に達したかチェック
    MOVF    0x22, W
    XORLW   MAX_NUM + 1
    BTFSS   STATUS, Z
    GOTO    SUM_LOOP

    ; 結果を0x30番地に格納（下位バイトのみ）
    MOVF    0x20, W
    MOVWF   RESULT_ADDR

END